{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 470,
  "height": 300,
  "title": "Energy Consumed (%) by State",
  "data": {
      "url": "https://raw.githubusercontent.com/akshiita-01/3179/refs/heads/main/week%2010%20hw/Australian_energymixbystateandfuel.csv",
      "format": {"type": "csv"}
  },
  "transform": [
      {
          "filter": "datum.State != null && datum.State != 'AUS'"  
      }
  ],
  "params": [
      {
          "name": "state_filter",
          "value": "All",
          "bind": {
              "input": "select",
              "options": [
                  "All",
                  "NSW",
                  "NT",
                  "QLD",
                  "SA",
                  "TAS",
                  "VIC",
                  "WA"
              ],
              "name": "Highlight State: "
          }
      }
  ],
  "layer": [
      {
          "mark": "circle",
          "encoding": {
              "x": {"field": "FuelType", "type": "nominal"},
              "y": {"field": "Percentage", "type": "quantitative", "title": "Percentage of Energy Consumed (%)"},
              "size": {"field": "Percentage", "type": "quantitative"},
              "color": {
                  "field": "State",
                  "type": "nominal",
                  "scale": {
                     
                  }
              },
              "opacity": {
                  "condition": {
                      "test": "state_filter == 'All' || datum.State == state_filter",
                      "value": 1  
                  },
                  "value": 0.2 
              },
              "tooltip": [
                  {"field": "State", "type": "nominal"},
                  {"field": "FuelType", "type": "nominal"},
                  {"field": "Percentage", "type": "quantitative"}
              ]
          }
      },
      {
          "mark": {
              "type": "text",
              "align": "left",
              "baseline": "middle",
              "dx": -35,
              "dy": 30,
              "fontSize": 8
          },
          "encoding": {
              "text": {
                  "condition": {
                      "test": "datum.State === 'NT' && datum.FuelType === 'Coal'",
                      "value": ["Northern Territory uses the most", "gas (70.4%) as the gas plants", "liquify it for export"]
                  },
                  "value": null
              },
              "x": {"field": "FuelType",
               "axis": { "title": "Fuel Type" }}
              ,
              "y": {
                  "field": "Percentage",
                  "axis": null  
              },
              "color": {"value": "black"}
          }
      }
  ]
}
